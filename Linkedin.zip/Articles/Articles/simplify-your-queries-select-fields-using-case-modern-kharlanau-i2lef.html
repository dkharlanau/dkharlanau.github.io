<html>
<head>
  <title>Simplify Your Queries with SELECT and FIELDS: Using CASE in Modern ABAP</title>
  <style>
    body {
      margin: 0 auto;
      width: 744px;
      font-family: Source Serif Pro, serif;
      line-height: 32px;
      font-weight: 400;
      color: rgba(0, 0, 0, 0.7);
      font-size: 21px;
    }
    h1, h2, h3 {
      font-family: Source Sans Pro, Helvetica, Arial, sans-serif;
    }
    h1 a, h1 a:visited {
      color: inherit;
      text-decoration: none;
    }
    h1 {
      line-height: 48px;
      font-weight: 600;
      color: rgba(0, 0, 0, 0.85);
      font-size: 42px;
      margin: 32px 0 20px;
    }
    h2 {
      line-height: 32px;
      font-weight: 600;
      color: rgba(0, 0, 0, 0.85);
      font-size: 26px;
      margin: 28px 0;
    }
    h3 {
      line-height: 28px;
      font-weight: 600;
      color: rgba(0, 0, 0, 0.85);
      font-size: 21px;
      margin: 24px 0;
    }
    p {
      margin: 32px 0;
    }
    .created, .published {
      color: rgba(0, 0, 0, 0.55);
      font-size: 15px;
      line-height: 15px;
      margin: 20px 0;
    }
    .created + .published {
      margin-top: -12px;
    }
    blockquote {
      font-family: Georgia, Source Serif Pro, serif;
      font-style: italic;
      font-size: 24px;
      line-height: 36px;
      margin: 48px 120px;
      text-align: center;
    }
    a {
      word-wrap: break-word;
      outline: none;
      text-decoration: none;
      background-color: transparent;
      border: 0;
      color: #008CC9;
    }
    a:hover {
      text-decoration: underline;
    }
    a:visited {
      color: #8C68CB;
    }
    .center {
      text-align: center;
    }
    iframe {
      display: block;
      margin: 44px auto;
    }
    *:not(pre) + pre, pre:first-of-type {
      margin-top: 32px;
      padding-top: 32px;
    }
    pre:only-of-type {
      margin: 32px 0;
      padding: 32px;
    }
    pre {
      background: #F3F6F8;
      overflow-x: auto;
      display: block;
      font-size: 13px;
      font-family: monospace;
      line-height: 13px;
      padding: 0 32px 32px;
      white-space: pre;
    }
    a.embedded {
      background: #F3F6F8;
      display: block;
      padding: 32px;
      margin: 32px 0;
    }
    img {
      height: auto;
      max-width: 100%;
    }
    .slate-image-embed__resize-full-width img {
      width: 100%;
    }
    .series-logo {
      width: 48px;
      height: 48px;
      box-sizing: border-box;
      background-clip: content-box;
      border: 4px solid transparent;
      border-radius: 6px;
      object-fit: scale-down;
      float: left;
    }
    .series-title {
      font-size: 16px;
      font-weight: 600;
      vertical-align: top;
    }
    .series-description {
      color: rgba(0,0,0,.6);
      font-weight: 400;
      font-size: 14px;
      line-height: 20px;
    }
    div {
      margin: 32px 0;
    }
  </style>
</head>
<body>
      <h1><a href="https://www.linkedin.com/pulse/simplify-your-queries-select-fields-using-case-modern-kharlanau-i2lef">Simplify Your Queries with SELECT and FIELDS: Using CASE in Modern ABAP</a></h1>
    <p class="created">Created on 2024-11-22 13:20</p>
  <p class="published">Published on 2024-11-22 13:22</p>
  <div><p>When working with SAP tables, it’s common to combine data from multiple tables and derive new fields dynamically based on conditions. One of the best features in modern ABAP SQL is the ability to use <strong>FIELDS</strong> and <strong>CASE</strong> in a SELECT statement. It allows you to calculate fields directly in the database layer, making your queries cleaner and more efficient.</p><p>In this article, let’s break down a practical use case involving the QMEL (Notification Table) and JEST (Status Table) tables, showcasing how to use <strong>CASE</strong> to assign meaningful user statuses to notification data.</p><hr><h3>Scenario</h3><p>You need to fetch a list of quality notifications (QMEL) and their current user statuses (JEST). Each status (STAT) in JEST has a specific meaning:</p><ul><li><p><strong>E0001:</strong> Canceled (CNCL)</p></li><li><p><strong>E0003:</strong> Under Analysis (ALYS)</p></li><li><p><strong>E0004:</strong> Closed (CLSD)</p></li><li><p><strong>E0005:</strong> Waiting (WAIT)</p></li><li><p>Anything else: Created (CREA)</p></li></ul><p>Additionally:</p><ul><li><p>Only active statuses (JEST~INACT ≠ 'X') should be considered.</p></li><li><p>The query must filter based on user-defined status values.</p></li></ul><hr><h3>Query Breakdown</h3><p>Here’s the query using <strong>FIELDS</strong> and <strong>CASE</strong>:</p><pre></pre><hr><h3>How It Works</h3><ol><li><p><strong>Table Joins</strong>:</p></li><li><p><strong>Dynamic Field Creation with CASE</strong>:</p></li><li><p><strong>Conditions</strong>:</p></li><li><p><strong>FIELDS</strong>:</p></li><li><p><strong>Result</strong>:</p></li></ol><hr><h3>Advantages of This Approach</h3><ul><li><p><strong>Performance Boost</strong>: The database handles all the heavy lifting (status mapping and filtering), reducing the workload in ABAP.</p></li><li><p><strong>Cleaner Code</strong>: Using <strong>FIELDS</strong> eliminates the need for post-processing logic in ABAP.</p></li><li><p><strong>Dynamic Columns</strong>: The <strong>CASE</strong> clause allows you to create calculated fields directly in SQL.</p></li><li><p><strong>Reduced Data Transfer</strong>: Only required columns are fetched, optimizing network performance.</p></li></ul><hr><h3>Example Output</h3><p>Let’s assume the following data:</p><p></p><figure><img data-media-urn="urn:li:digitalmediaAsset:D4D12AQGMhmq0z8AAKA" src="https://media.licdn.com/dms/image/v2/D4D12AQGMhmq0z8AAKA/article-inline_image-shrink_1000_1488/article-inline_image-shrink_1000_1488/0/1732281735156?e=1761782400&amp;v=beta&amp;t=aJVSo7tDrjhbO4EIvVhCfDu9FyMNqS0wuw-UfH0a4NU"><figcaption></figcaption></figure><p>After running the query, the result will look like this:</p><p><strong> </strong></p><figure><img data-media-urn="urn:li:digitalmediaAsset:D4D12AQGxFgeDzqijtQ" src="https://media.licdn.com/dms/image/v2/D4D12AQGxFgeDzqijtQ/article-inline_image-shrink_1000_1488/article-inline_image-shrink_1000_1488/0/1732281749713?e=1761782400&amp;v=beta&amp;t=OdsCmkNOXXawxHBs1P6teqN_n0f6vE_BfUoK-Wi2GIA"><figcaption></figcaption></figure><p>Inactive records (like 1000003) are excluded, and statuses are mapped according to the <strong>CASE</strong> logic.</p><hr><h3>When to Use This Approach</h3><ol><li><p><strong>Status Mapping</strong>: When translating raw codes into meaningful descriptions.</p></li><li><p><strong>Data Preprocessing</strong>: Reduce post-processing in ABAP by pushing logic to the database.</p></li><li><p><strong>Optimized Queries</strong>: Minimize data transfer by selecting only relevant columns.</p></li></ol><hr><h3>Limitations</h3><ul><li><p><strong>Complex Cases</strong>:<strong> If the CASE logic gets too complicated, consider using a helper table or CDS view for better maintainability.</strong></p></li><li><p><strong>Performance</strong>: Avoid using it with very large datasets unless proper indexing is in place.</p></li></ul></div>
</body>
</html>