{% assign resume = site.data.resume %}
{% assign author_name = resume.name | default: site.author.name | default: site.title %}
{% assign author_title = resume.headline | default: site.author.title %}
{% assign profile_image = resume.image | default: '/assets/img/DzmitryiKharlanau.png' %}
{% unless profile_image contains '://' %}
  {% assign profile_image = profile_image | absolute_url %}
{% endunless %}
{% assign canonical_url = page.url | absolute_url %}
{% assign site_home = '/' | absolute_url %}
{% assign same_as_links = site.social.links | default: empty %}
{% assign knows_about = 'SAP S/4HANA|Order-to-Cash|Digital Transformation|Enterprise Integration|AI Automation' | split: '|' %}
{% assign primary_education = resume.education | first %}
{% assign contact_url = 'https://www.linkedin.com/in/dkharlanau' %}
{% assign resume_json_url = '/ai/resume.json' | absolute_url %}
{% assign resume_yaml_url = '/ai/resume.yml' | absolute_url %}
{% assign same_as_json = '' %}
{% if same_as_links and same_as_links != empty %}
  {% capture same_as_json %}{% for link in same_as_links %}"{{ link }}"{% unless forloop.last %}, {% endunless %}{% endfor %}{% endcapture %}
{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ author_name | escape }}",
  "jobTitle": "{{ author_title | escape }}",
  "image": "{{ profile_image }}",
  "url": "{{ canonical_url }}",
  "sameAs": [{% if same_as_json != '' %}{{ same_as_json }}{% endif %}],
  "contactPoint": [{
    "@type": "ContactPoint",
    "contactType": "Business inquiries",
    "url": "{{ contact_url }}",
    "availableLanguage": ["English"]
  }],
  "worksFor": {
    "@type": "Organization",
    "name": "EPAM Systems"
  },
  {% if primary_education %}"alumniOf": {
    "@type": "EducationalOrganization",
    "name": "{{ primary_education.school | escape }}"{% if primary_education.notes %},
    "educationalCredentialAwarded": "{{ primary_education.notes | escape }}"{% endif %}
  },
  {% endif %}
  "knowsAbout": [{% for topic in knows_about %}"{{ topic | strip | escape }}"{% unless forloop.last %}, {% endunless %}{% endfor %}],
  "description": "{{ site.description | default: resume.summary | strip_newlines | escape }}"
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.title | escape }}",
  "url": "{{ site_home }}",
  "description": "{{ site.description | strip_newlines | escape }}",
  "publisher": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  },
  "isAccessibleForFree": true
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Dataset",
  "name": "Dzmitryi Kharlanau Resume Dataset",
  "description": "Structured resume formats (JSON and YAML) for copilots, sourcing agents, and automation workflows.",
  "creator": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  },
  "license": "https://creativecommons.org/licenses/by/4.0/",
  "url": "{{ site_home }}",
  "distribution": [
    {
      "@type": "DataDownload",
      "encodingFormat": "application/json",
      "contentUrl": "{{ resume_json_url }}"
    },
    {
      "@type": "DataDownload",
      "encodingFormat": "application/x-yaml",
      "contentUrl": "{{ resume_yaml_url }}"
    }
  ]
}
</script>

{% if page.url == '/' or page.url == site.baseurl %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site_home }}"
    }
  ]
}
</script>
{% elsif page.url == '/notes/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site_home }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Notes",
      "item": "{{ '/notes/' | absolute_url }}"
    }
  ]
}
</script>
{% elsif page.collection == 'notes' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site_home }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Notes",
      "item": "{{ '/notes/' | absolute_url }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ page.title | strip_html | normalize_whitespace | replace: '"', '\\"' }}",
      "item": "{{ canonical_url }}"
    }
  ]
}
</script>
{% endif %}

{% if page.collection == 'notes' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ page.title | strip_html | normalize_whitespace | replace: '"', '\\"' }}",
  "description": "{{ page.summary | default: page.excerpt | strip_html | normalize_whitespace | truncate: 160 | replace: '"', '\\"' }}",
  "author": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  },
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  {% if page.updated %}"dateModified": "{{ page.updated | date_to_xmlschema }}",
  {% endif %}"mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ canonical_url }}"
  },
  "image": "{{ profile_image }}",
  "url": "{{ canonical_url }}"
}
</script>
{% elsif page.url == '/notes/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ page.title | strip_html | escape }}",
  "description": "{{ page.description | strip_html | escape }}",
  "url": "{{ canonical_url }}"
}
</script>
{% endif %}
